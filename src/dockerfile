FROM python:3.10

WORKDIR /app

COPY requirements.txt requirements.txt

RUN pip install -r requirements.txt

COPY . .

ENV BSKY_BOT_DATABASE=bsky_bot
ENV MONGO_HOST=mongo
ENV MONGO_PORT=27017

ARG BSKY_USERNAME
ARG BSKY_PASSWORD
ENV BSKY_USERNAME=$BSKY_USERNAME
ENV BSKY_PASSWORD=$BSKY_PASSWORD

ARG RABBIT_USER
ARG RABBIT_PASSWORD
ENV RABBIT_USER=$RABBIT_USER
ENV RABBIT_PASSWORD=$RABBIT_PASSWORD

ARG ADMIN_ID
ENV ADMIN_ID=$ADMIN_ID
ARG TELEGRAM_TOKEN_BSKY
ENV TELEGRAM_TOKEN_BSKY=$TELEGRAM_TOKEN_BSKY
ENV TZ="America/Sao_Paulo"

CMD ["python","-u","main.py"]
